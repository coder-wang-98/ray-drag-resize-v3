(function(o,f){typeof exports=="object"&&typeof module<"u"?module.exports=f(require("vue")):typeof define=="function"&&define.amd?define(["vue"],f):(o=typeof globalThis<"u"?globalThis:o||self,o["drag-resize-v3"]=f(o.Vue))})(this,function(o){"use strict";var f,F=new Uint8Array(16);function V(){if(!f&&(f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f(F)}const X=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y(e){return typeof e=="string"&&X.test(e)}for(var i=[],w=0;w<256;++w)i.push((w+256).toString(16).substr(1));function B(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!Y(r))throw TypeError("Stringified UUID is invalid");return r}function H(e,t,r){e=e||{};var a=e.random||(e.rng||V)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(var d=0;d<16;++d)t[r+d]=a[d];return t}return B(a)}const W={class:"drag-resize-container"},k=["onMousedown"],L=o.defineComponent({name:"dragResize"}),N=o.defineComponent({...L,props:{nodeKey:{type:[Number,String],default:H()},minh:{type:Number,default:100},minw:{type:Number,default:100},disabled:{type:[Boolean,String],default:!1},init:{type:Object,default:()=>({width:100,height:100,top:0,left:0})}},emits:["onDragResize"],setup(e,{emit:t}){const r=e,{nodeKey:a,minh:d,minw:C,init:y,disabled:m}=o.toRefs(r),n=o.ref(),S=l=>{if(h(m.value,"drag"))console.warn("\u62D6\u62FD\u529F\u80FD\u5DF2\u88AB\u7981\u7528");else{const s=n.value.parentElement;let g=s.style.position;s.style.position="relative";let{left:v,top:z}=x(),D=l.clientX-parseFloat(v)||n.value.offsetLeft,_=l.clientY-parseFloat(z)||n.value.offsetTop;l.preventDefault(),document.onmousemove=function(p){let u=p.clientX-D,c=p.clientY-_;u<0?u=0:u>s.clientWidth-n.value.clientWidth&&(u=s.clientWidth-n.value.clientWidth),c<0?c=0:c>s.clientHeight-n.value.clientHeight&&(c=s.clientHeight-n.value.clientHeight),n.value.style.transform=`translate3d(${u}px, ${c}px,0)`},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,s.style.position=g;let{left:p,top:u}=x();t("onDragResize",{left:p,top:u,height:n.value.style.height,width:n.value.style.width,nodeKey:a.value})}}},T=()=>{if(h(m.value,"resize"))console.warn("\u8BBE\u7F6E\u5927\u5C0F\u529F\u80FD\u5DF2\u88AB\u7981\u7528");else{const l=n.value.parentElement,s=window.event;s==null||s.stopPropagation(),s==null||s.preventDefault();const g=n.value.clientHeight,v=n.value.clientWidth,z=s.clientX,D=s.clientY,_=u=>{const c=u.clientX,R=u.clientY-D,E=c-z,$=g+R>d.value?g+R>l.clientHeight?l.clientHeight:g+R:d.value,M=v+E>C.value?v+E>l.clientWidth?l.clientWidth:v+E:C.value;n.value.style.width=M+"px",n.value.style.height=$+"px"},p=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",p),console.log(n.value.style.transform);let{left:u,top:c}=x();t("onDragResize",{left:u,top:c,height:n.value.style.height,width:n.value.style.width,nodeKey:a.value})};document.addEventListener("mousemove",_),document.addEventListener("mouseup",p)}},x=()=>{let l=/(\d+px, \d+px)/;return{left:n.value.style.transform.match(l)[0].split(",")[0],top:n.value.style.transform.match(l)[0].split(",")[1]}},h=(l,s)=>typeof l=="boolean"?l:s==l;return o.onMounted(()=>{n.value.parentElement.style.position="relative",n.value.style.height=y.value.height+"px",n.value.style.width=y.value.width+"px",n.value.style.transform=`translate3d(${y.value.left}px, ${y.value.top}px,0)`}),(l,s)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"dragResize",ref:n,class:o.normalizeClass(["drag-resize",h(o.unref(m),"drag")?"disabled":""]),onMousedown:S},[o.createElementVNode("div",W,[o.renderSlot(l.$slots,"default",{},void 0,!0)]),h(o.unref(m),"resize")?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("div",{key:0,ref:"resizeNode",class:o.normalizeClass([h(o.unref(m),"resize")?"disabled":"","resize-node"]),onMousedown:o.withModifiers(T,["stop"])},null,42,k))],34))}}),j="",b=((e,t)=>{const r=e.__vccOpts||e;for(const[a,d]of t)r[a]=d;return r})(N,[["__scopeId","data-v-6c6f4531"]]);return e=>{e.component(b.name,b)}});
